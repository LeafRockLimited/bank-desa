import{_ as R}from"./AdminLayout-9WE8as7q.js";import{Z as P,k as B,l as m,r,o as V,c as T,a as o,w as l,F as C,b as a,m as _,t as d,e as c,f as j}from"./app-xshmINiS.js";import{T as H}from"./Table-DNiH6u3p.js";import{C as F}from"./CardBody-DDyTtAB0.js";import{P as L}from"./PrimaryButton-1w3nVphY.js";import{H as h}from"./Helper-CD4WHvGO.js";import{T as I}from"./TahunFilter-BkdHPHG_.js";import{B as M}from"./BulanFilter-BXoc2H93.js";import{_ as S}from"./SecondaryButton-B-awMcv5.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BH_bNMNy.js";import"./ResponsiveNavLink-CYClNS9r.js";import"./Toast-DO6WADHa.js";const A={components:{AuthenticatedLayout:R,Head:P,Link:B,Table:H,CardBody:F,PrimaryButton:L,TahunFilter:I,BulanFilter:M,SecondaryButton:S},data(){return{dataPinjaman:[],dataRow:[],dataRekap:{jumlah_pinjaman:0,total_pengajuan:0,uang_diterima_nasabah:0,keuntungan:0,year:null},page:1,length:10,searchQuery:null,tahun:this.$moment().year(),bulan:null,status:null,jenisPinjaman:null}},computed:{headers(){return["nasabah.nama_lengkap","jenis_pinjaman","jumlah_pinjaman","bunga","nominal_diterima","status_pinjaman","tanggal_jatuh_tempo","tanggal_pengajuan"]},startRow(){return this.dataPinjaman.from??1},endRow(){return this.dataPinjaman.to??0},totalData(){return this.dataPinjaman.total??0},links(){return this.dataPinjaman.links??[]}},watch:{page(n){this.getData()},length(n){this.page=1,this.getData()},searchQuery(n){this.page=1,this.getData()},tahun(n){this.page=1,this.getData(),this.getRekapData()},bulan(n){this.page=1,this.getData(),this.getRekapData()},status(n){this.page=1,this.getData(),this.getRekapData()},jenisPinjaman(n){this.page=1,this.getData(),this.getRekapData()}},beforeMount(){this.getData(),this.getRekapData()},methods:{async getData(){const n=route("pinjaman.show",{page:this.page,length:this.length,searchQuery:this.searchQuery,tahun:this.tahun,bulan:this.bulan,status:this.status,jenis_pinjaman:this.jenisPinjaman}),p=(await m.get(n)).data;this.dataPinjaman=p,this.mappingData()},mappingData(){var n,t;if(this.dataRow=[],((t=(n=this.dataPinjaman)==null?void 0:n.data)==null?void 0:t.length)>0){let p=this.dataPinjaman.data.map(i=>(i.nominal_diterima=h.rupiah(parseInt(i.nominal_diterima)),i.tanggal_jatuh_tempo=h.tanggal(i.tanggal_jatuh_tempo),i.tanggal_pengajuan=h.tanggal(i.tanggal_pengajuan),i.jumlah_pinjaman=h.rupiah(parseInt(i.jumlah_pinjaman)),i));this.dataRow=p}else return[]},async getRekapData(){const t=(await m.get(route("pinjaman.show_rekap",{tahun:this.tahun,bulan:this.bulan,status:this.status}))).data;this.dataRekap={jumlah_pinjaman:h.rupiah(parseInt(t.jumlah_pinjaman)),total_pengajuan:t.total_pengajuan,uang_diterima_nasabah:h.rupiah(parseInt(t.uang_diterima_nasabah)),keuntungan:h.rupiah(parseInt(t.keuntungan)),year:t.year}}}},Q=a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Pinjaman Nasabah",-1),q={class:"flex flex-row space-x-4"},N={class:"w-fit"},U=a("p",{class:"text-lg font-bold"},"Isi formulir peminjaman",-1),O=a("p",null,"Tambahkan data pinjaman nasabah dengan menekan tombol dibawah ini, pastikan semua formulir diisi dengan valid",-1),J={class:"mt-4"},Z={class:"space-y-3"},E={class:"text-md lg:text-lg font-bold"},G={class:"grid grid-cols-1 gap-6 lg:flex lg:flex-row lg:justify-between"},K=a("p",{class:"text-gray-500"},"Total pengajuan pinjaman",-1),W={class:"font-bold text-xl"},X=a("hr",{class:"max-lg:show"},null,-1),Y=a("p",{class:"text-gray-500"},"Uang dipinjamkan (Total)",-1),$={class:"font-bold text-xl lg:text-right"},aa=a("hr",{class:"max-lg:show"},null,-1),ta=a("p",{class:"text-gray-500"},"Jumlah nominal pengembalian",-1),na={class:"font-bold text-xl lg:text-right"},ea=a("hr",{class:"max-lg:show"},null,-1),sa=a("p",{class:"text-gray-500"},"Potensi keuntungan",-1),oa={class:"font-extrabold text-xl text-indigo-700 lg:text-right"},ia={class:"grid grid-cols-1 gap-6"},la={class:"flex flex-row space-x-3"},ra=["href"],ua=a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 32 32"},[a("path",{fill:"#20744a","fill-rule":"evenodd",d:"M28.781 4.405h-10.13V2.018L2 4.588v22.527l16.651 2.868v-3.538h10.13A1.16 1.16 0 0 0 30 25.349V5.5a1.16 1.16 0 0 0-1.219-1.095m.16 21.126H18.617l-.017-1.889h2.487v-2.2h-2.506l-.012-1.3h2.518v-2.2H18.55l-.012-1.3h2.549v-2.2H18.53v-1.3h2.557v-2.2H18.53v-1.3h2.557v-2.2H18.53v-2h10.411Z"}),a("path",{fill:"#20744a",d:"M22.487 7.439h4.323v2.2h-4.323zm0 3.501h4.323v2.2h-4.323zm0 3.501h4.323v2.2h-4.323zm0 3.501h4.323v2.2h-4.323zm0 3.501h4.323v2.2h-4.323z"}),a("path",{fill:"#fff","fill-rule":"evenodd",d:"m6.347 10.673l2.146-.123l1.349 3.709l1.594-3.862l2.146-.123l-2.606 5.266l2.606 5.279l-2.269-.153l-1.532-4.024l-1.533 3.871l-2.085-.184l2.422-4.663z"})],-1),ha=a("span",null,"Download",-1),da=[ua,ha],pa=a("option",{selected:"",value:null}," Status Pinjaman ",-1),ga=a("option",{value:"pending"}," Menunggu ",-1),ma=a("option",{value:"approved"}," Diterima ",-1),_a=a("option",{value:"rejected"}," Ditolak ",-1),ca=a("option",{value:"paid"}," Lunas ",-1),ja=[pa,ga,ma,_a,ca],fa=a("option",{selected:"",value:null}," Jenis Pinjaman ",-1),ba=a("option",{value:"mingguan"},"Mingguan",-1),va=a("option",{value:"bulanan"},"Bulanan",-1),wa=a("option",{value:"tahunan"},"Tahunan",-1),xa=a("option",{value:"musiman"},"Musiman",-1),ka=[fa,ba,va,wa,xa];function ya(n,t,p,i,e,u){const f=r("Head"),b=r("PrimaryButton"),v=r("Link"),g=r("CardBody"),w=r("TahunFilter"),x=r("BulanFilter"),k=r("SecondaryButton"),y=r("Table"),D=r("AuthenticatedLayout");return V(),T(C,null,[o(f,{title:"Pinjaman"}),o(D,null,{header:l(()=>[Q]),default:l(()=>[o(g,null,{content:l(()=>[a("div",q,[a("div",N,[U,O,a("div",J,[o(v,{href:n.route("pinjaman.create")},{default:l(()=>[o(b,{class:""},{default:l(()=>[_("+ Formulir Peminjaman")]),_:1})]),_:1},8,["href"])])])])]),_:1}),o(g,null,{content:l(()=>[a("div",Z,[a("div",null,[a("p",E,"Rekap pinjaman nasabah tahun "+d(e.tahun),1)]),a("div",G,[a("div",null,[K,a("p",W,d(e.dataRekap.total_pengajuan??0)+" Pengajuan",1)]),X,a("div",null,[Y,a("p",$,d(e.dataRekap.uang_diterima_nasabah),1)]),aa,a("div",null,[ta,a("p",na,d(e.dataRekap.jumlah_pinjaman),1)]),ea,a("div",null,[sa,a("p",oa,d(e.dataRekap.keuntungan),1)])])])]),_:1}),o(g,null,{content:l(()=>[o(y,{headers:u.headers,data:e.dataRow,startRow:u.startRow,links:u.links,lengthProps:n.lengthProps,deleteData:!0,deleteRoute:"pinjaman.delete",editData:!0,editRoute:"pinjaman.edit",totalData:u.totalData,endRow:u.endRow,actionUsingId:!0,onRefreshedData:t[4]||(t[4]=()=>{u.getData(),u.getRekapData()}),onClickPage:t[5]||(t[5]=s=>{e.page=s}),onChangeLength:t[6]||(t[6]=s=>{e.length=s}),onOnSearch:t[7]||(t[7]=s=>{e.searchQuery=s})},{filter:l(()=>[a("div",ia,[a("div",la,[a("a",{href:n.route("pinjaman.download",{tahun:e.tahun,bulan:e.bulan,status:e.status}),class:"border px-3 rounded-md border-gray-300 bg-gray-50 inline-flex items-center text-gray-600 space-x-1"},da,8,ra),o(w,{onOnChange:t[0]||(t[0]=s=>{e.tahun=s})}),o(x,{onOnChange:t[1]||(t[1]=s=>{e.bulan=s})}),c(a("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.status=s),class:"min-w-40 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"},ja,512),[[j,e.status]])]),c(a("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.jenisPinjaman=s),class:"w-40 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"},ka,512),[[j,e.jenisPinjaman]])])]),options:l(({item:s})=>[o(k,{onClick:Da=>n.$inertia.visit(n.route("agunan.show",s.id))},{default:l(()=>[_(" Agunan ")]),_:2},1032,["onClick"])]),_:1},8,["headers","data","startRow","links","lengthProps","totalData","endRow"])]),_:1})]),_:1})],64)}const Aa=z(A,[["render",ya]]);export{Aa as default};
